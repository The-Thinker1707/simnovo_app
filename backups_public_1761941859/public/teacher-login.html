<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Teacher Login</title>
<link rel="stylesheet" href="/styles.css">
<style>.login-wrap{max-width:420px;margin:28px auto;padding:18px}</style>
</head><body>
  <div class="app login-wrap card">
    <a class="back-button" href="javascript:history.back()">Back</a>
    <h2>Teacher / Admin Login</h2>
    <form id="teacherLogin">
      <div style="margin-top:8px"><input name="email" type="email" placeholder="Email" required style="width:100%;padding:10px;border-radius:8px"></div>
      <div style="margin-top:8px"><input name="password" type="password" placeholder="Password" required style="width:100%;padding:10px;border-radius:8px"></div>
      <div style="margin-top:12px"><button class="portal-btn" type="submit">Login</button></div>
    </form>
    <div style="margin-top:12px" class="small">Demo credentials: teacher@example.com / teach123</div>
  </div>

<script>
document.getElementById('teacherLogin').addEventListener('submit', async function(e){
  e.preventDefault();
  const form = e.currentTarget;
  const email = form.email.value.trim();
  const password = form.password.value;
  try {
    const r = await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
    const j = await r.json();
    if (r.ok && j.token) {
      // store token in session and redirect to dashboard
      sessionStorage.setItem('ec_token', j.token);
      location.href = '/teacher-dashboard.html';
    } else {
      alert(j.error || 'Invalid teacher credentials');
    }
  } catch(err){
    alert('Network error: ' + err);
  }
});
</script>
</body></html>
