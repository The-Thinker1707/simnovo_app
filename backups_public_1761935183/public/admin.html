<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Admin — EduConnect</title><link rel="stylesheet" href="/styles.css"/></head><body>
<div class="container"><header class="header"><div class="brand"><div class="logo">EDUCONNECT</div></div><nav class="top-nav"><a href="/auth/logout">Logout</a></nav></header>
<h3>Admin</h3>
<div class="card"><h3>Create User</h3><form id="create-user" style="display:grid;gap:8px"><input name="name" placeholder="Name"/><input name="email" placeholder="Email" required/><input name="password" placeholder="Password" required/><select name="role" required><option value="">Role</option><option value="teacher">Teacher</option><option value="parent">Parent</option><option value="student">Student</option></select><input name="extra" placeholder="StudentID/ChildID"/><button type="submit">Create</button></form></div>
<div style="height:12px"></div>
<div class="card"><h3>Link Parent → Student</h3><form id="link-form" style="display:grid;gap:8px"><input name="parentEmail" placeholder="Parent email" required/><input name="studentId" placeholder="Student ID (e.g. s-1)" required/><button type="submit">Link</button></form></div>
</div>
<script>
document.getElementById('create-user').addEventListener('submit', async function(ev){ ev.preventDefault(); const fd=new FormData(this); const body={ name:fd.get('name'), email:fd.get('email'), password:fd.get('password'), role:fd.get('role'), extra:fd.get('extra') }; const r=await fetch('/api/admin/users',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body)}); if(r.ok){ alert('User created'); this.reset(); } else { alert('Failed'); } });
document.getElementById('link-form').addEventListener('submit', async function(ev){ ev.preventDefault(); const fd=new FormData(this); const body={ parentEmail:fd.get('parentEmail'), studentId:fd.get('studentId') }; const r=await fetch('/api/admin/link',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body)}); if(r.ok){ alert('Linked'); this.reset(); } else { alert('Failed'); } });
</script></body></html>
