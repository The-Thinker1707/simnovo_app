<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Teacher — EduConnect</title><link rel="stylesheet" href="/styles.css"></head>
<body>
  <div class="container">
    <header class="header"><div class="brand"><div class="logo">EDUCONNECT</div></div><nav class="top-nav"><a href="/auth/logout">Logout</a><a href="/">Home</a></nav></header>
    <h2 style="margin:0 0 8px 0;font-weight:900">Teacher & Administration</h2>
    <p style="margin:0 0 14px 0;color:var(--muted)">Manage lessons, results, staff, attendance and policy documents.</p>

    <div class="features">
      <div class="card" onclick="openFeature('lessons')"><h4>Lesson Plans & Resources</h4><p>Upload lesson plans, attach slides, PDFs and external links for your class.</p></div>
      <div class="card" onclick="openFeature('results')"><h4>Class Performance & Results</h4><p>Enter grades, view cohort trends and export reports for term analysis.</p></div>
      <div class="card" onclick="openFeature('staff')"><h4>Staff Directory</h4><p>Find colleagues, email, phone and department information quickly.</p></div>
      <div class="card" onclick="openFeature('development')"><h4>Professional Development</h4><p>Courses, training calendar and CPD tracking for staff growth.</p></div>
      <div class="card" onclick="openFeature('attendance')"><h4>Attendance & Timetable</h4><p>Mark attendance, manage timetables and view room assignments.</p></div>
      <div class="card" onclick="openFeature('policies')"><h4>Policies & Procedures</h4><p>Access policy documents, safeguarding information and compliance.</p></div>
      <div class="card"><h4>Add Lesson</h4>
        <form id="lesson-form" style="display:grid;gap:8px">
          <input name="title" placeholder="Lesson title" required/>
          <input name="resource" placeholder="Resource URL (optional)"/>
          <button type="submit">Add Lesson</button>
        </form>
      </div>
      <div class="card"><h4>Enter Result</h4>
        <form id="result-form" style="display:grid;gap:8px">
          <input name="studentId" placeholder="Student ID (s-1)" required/>
          <input name="term" placeholder="Term (e.g. Term 3 2025)" required/>
          <input name="subject" placeholder="Subject" required/>
          <input name="grade" placeholder="Grade" required/>
          <button type="submit">Save Result</button>
        </form>
      </div>
    </div>

    <div style="margin-top:18px"><button onclick="location.href='/'" class="role-btn">Back to Home</button></div>
  </div>

<script>
function openFeature(id){
  alert('Open feature: ' + id + '\\n(Placeholder — you can wire this to modals or pages.)');
}
document.getElementById('lesson-form').addEventListener('submit', async function(ev){
  ev.preventDefault();
  const fd = new FormData(this);
  const body = { title: fd.get('title'), resource: fd.get('resource') };
  const res = await fetch('/api/lessons', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
  if(res.ok){ alert('Lesson added'); this.reset(); } else { alert('Failed to add lesson'); }
});
document.getElementById('result-form').addEventListener('submit', async function(ev){
  ev.preventDefault();
  const fd = new FormData(this);
  const body = { studentId: fd.get('studentId'), term: fd.get('term'), subject: fd.get('subject'), grade: fd.get('grade') };
  const r = await fetch('/api/teacher/results', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body)});
  if(r.ok){ alert('Result saved'); this.reset(); } else { alert('Save failed'); }
});
</script>
</body>
</html>
